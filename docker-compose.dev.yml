services:
  client_dev:
    build:
      context: ./client
      target: builder
    container_name: frostbyte_client_dev
    working_dir: /app
    command: npm run dev -- --host 0.0.0.0
    volumes:
      - ./client:/app
      - client_node_modules:/app/node_modules
    networks:
      - frostbyte_network

  caddy:
    volumes:
      - ./gateway/Caddyfile.dev:/etc/caddy/Caddyfile:ro
    depends_on:
      postgrest:
        condition: service_started
      printer_service:
        condition: service_started
      client_dev:
        condition: service_started
